/*
 scroll right block
 */
var col;
var elm_scroll = $('<div/>', {
    class: 'scroll_elms',
    id: 'id_scroll_elms',
    style: 'display:none;'
});
var col_children_heght = top_pos_fixed = 0;
/*
 scroll right block
 */

/*
 enabled scroll menu .active
 */
var clicked = true;
/*
 enabled scroll menu .active
 */
/*
 clean_elm menu fix width
 */
var menu_fix_elm = {};
/*
 clean_elm menufix width
 */
/*
 video youtube
 */
// 2. This code loads the IFrame Player API code asynchronously.
var tag = document.createElement('script');

tag.src = "https://www.youtube.com/iframe_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
var player = {};

function onYouTubeIframeAPIReady() {
    $('.video_container').each(function (e) {
        $(this).attr('id', 'video_' + e);
        player[e] = new YT.Player('video_' + e, {
            height: '315',
            width: '560',
            videoId: $(this).attr('data-video'),
            events: {
                'onReady': onVideoReady,
                'onStateChange': onPlayerStateChange
            }
        });
    });
}

function onPlayerStateChange(event) {
    if (event.data == 2) {
        $('iframe[data-video="' + event.target.getVideoData()['video_id'] + '"]').parent().removeClass('played').addClass('paused');
    }
    else {
        $('iframe[data-video="' + event.target.getVideoData()['video_id'] + '"]').parent().removeClass('paused').addClass('played');
    }
}

function onVideoReady(event) {
    $('iframe[data-video="' + event.target.getVideoData()['video_id'] + '"]').parent().find('img').attr('src', 'http://img.youtube.com/vi/' + event.target.getVideoData()['video_id'] + '/0.jpg');
}

/*
 video youtube
 */
jQuery(document).ready(function ($) {

    $('.returnUp').click(function () {

        var target = $('body');
        var scrollToPosition = $(target).offset().top;

        $('html, body').stop().animate({
            scrollTop: scrollToPosition}, 600, function () {
            location.hash = target;
        });

    });

    // ANIMATION START
    $(window).scroll(function () {
        if ($(window).scrollTop() < 600) {
            $(".returnUp").removeClass("returnUpAnimStart");
            $(".returnUp").addClass("returnUpAnimEnd");
        } else {
            $(".returnUp").addClass("returnUpAnimStart");
            $(".returnUp").removeClass("returnUpAnimEnd");
        }
    });

    $('.opening_btn').on('click', function (e) {
        e.preventDefault();
        if (!$(this).hasClass('show_all')) {
            $(this).parent().parent().find('.profile_info_subs_hide').css({display: 'inline'});
            $(this).addClass('show_all');
        }
        else {
            $(this).parent().parent().find('.profile_info_subs_hide').css({display: 'none'});
            $(this).removeClass('show_all');
        }
    });

    $('.description_btn').on('click', function (e) {
        e.preventDefault();
        if (!$(this).hasClass('show_all')) {
            $(this).parent().parent().find('.item_hide').css({display: 'list-item'});
            $(this).addClass('show_all');
        }
        else {
            $(this).parent().parent().find('.item_hide').css({display: 'none'});
            $(this).removeClass('show_all');
        }
    });


    /*$(".services_item_img a").on('click',function(){
     var elms_pict = [];
     $(this).parent().find('a').each(function(e){
     elms_pict[e] = {
     'src':$(this).attr('href'),
     'thumb':$(this).attr('data-src'),
     'downloadUrl':false
     }
     });
     $(this).lightGallery({
     dynamic:true,
     dynamicEl:elms_pict,
     });
     });*/

    // $(".services_item_img a").fancybox();


    if ($('.correspondence_message_form_text').length) {
        autosize($('.correspondence_message_form_text'));
    }

    $('.raty').each(function () {
        $(this).raty({starType: 'i', score: $(this).data('score')});
    });

    /*userpanel mobile show*/
    $('.body_userpanel .messages_btn').on('click', function () {
        if (!$('body').hasClass('show_userpanel_side')) {
            $('body').addClass('show_userpanel_side');
        }
        else {
            closeUserPanel();
        }
    });
    $('.userpanel_overlay,.userpanel_side_close').on('click', function () {
        closeUserPanel();
        return false;
    });
    $(window).resize(function () {
        if (window.innerWidth >= 1024) {
            closeUserPanel();
        }
    });

    function closeUserPanel() {
        $('body').removeClass('show_userpanel_side');
    }

    /*END userpanel mobile show*/

    /*for ie cont height on .userpanel*/
    if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.appVersion.indexOf('Trident/') > 0) {
        /* Microsoft Internet Explorer detected in. */
        if ($('.body_userpanel').length) {
            var allHeight = 0;
            var minusHeight = 0;
            $('.wrap').children().each(function () {
                if (!$(this).hasClass('cont')) {
                    minusHeight += $(this).outerHeight(true);
                }
                allHeight += $(this).outerHeight(true);
            });
            if ($(document).outerHeight(true) > allHeight) {
                $('.wrap').height($(document).outerHeight(true));
                $('.cont.cont_container').height(($(document).outerHeight(true) - minusHeight));
            }

            $(window).resize(function () {
                var allHeight = 0;
                var minusHeight = 0;
                $('.wrap,.cont.cont_container').attr('style', '');
                $('.wrap').children().each(function () {
                    if (!$(this).hasClass('cont')) {
                        minusHeight += $(this).outerHeight(true);
                    }
                    allHeight += $(this).outerHeight(true);
                });
                $('.wrap').height($(document).outerHeight(true));
                $('.cont.cont_container').height(($(document).outerHeight(true) - minusHeight));
            });
        }
    }
    /*END for ie cont height on .userpanel*/

    /*
     popups
     */

    /*
     login and authorization popup
     */
    $('.login_pop,.authorization_pop').on('click', function () {
        close_all_popups(true);
        $('body').addClass('show_popup');
        //if(!$(this).hasClass('authorization_pop')){
        $('a[data-id="login_pop"]').click();
        /*}
         else{
         $('a[data-id="authorization_pop"]').click();
         }*/
        $('.login_popup').css('display', 'inline-block');

        return false;
    });
    /*
     END login and authorization popup
     */

    /*
     restore pass
     */
    $('.authorization_recall a').on('click', function () {
        close_all_popups(true);
        $('body').addClass('show_popup');
        $('.pass_restore').css('display', 'inline-block');
        return false;
    });
    /*
     END restore pass
     */
    /*
     close popups
     */
    $('html').on('click', function (e) {
        var is_close = true;
        var target = e.target;
        $('.popup_wr').each(function () {
            if (isChildOf(target, this)) {
                is_close = false;
                return;
            }
        });

        if ($('.popup').is(':visible') && is_close) {
            close_all_popups();
        }
    });
    $('.popup_close').on('click', function (e) {
        close_all_popups();
    });
    /*
     END close popups
     */

    /*
     show popup success registration or success authorization

     $('.login_popup .btn').on('click',function(){
     close_all_popups(true);
     $('body').addClass('show_popup');
     $('.authorization_success').css('display','inline-block');
     return false;
     });

     END show popup success registration or success authorization
     */

    /*
     END popups
     */
    /*
     calculate clean width menu fix elms
     */
    $('.menu_2 li').each(function (e) {
        var index = $(this).find('a').attr('href');
        if (index != undefined && index != '/3d-models/' && index != '/market/' && index != '/shop/') {
            index = index.split('#')[1];
            menu_fix_elm[index] = $(this).position().left;
        }
    });
    /*
     calculate clean width menu fix elms
     */
    /*
     play video youtube on click
     */
    $('.post_list_item_video a').on('click', function (e) {
        e.preventDefault();
        if ($(this).parents('.post_list_item_video').find('iframe').length > 0) {
            var video_index = $(this).parents('.post_list_item_video').find('iframe').attr('id').split('_')[1];
            //if (video_index != undefined) video_index = video_index.split('_')[1];
            if (typeof player[video_index] != 'undefined') {
                $(this).parent().removeClass('paused').addClass('played');
                if (/iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream) {

                }
                else {
                    player[video_index].playVideo();
                }
            }
        }
        return false;
    });
    /*
     play video youtube on click
     */

    $('#header-search').focus(function(){
        if(!$('#header-search').hasClass('active')){
            $('.header_main .menu').addClass('inactive');
            $('.header_main .search_block').addClass('active');
            if(window.innerWidth < 768){
                $('.header_main .logo,.header_main .anonymous_login,.header_main .user_login,.header_main .menu_btn').addClass('inactive');
            }
        }
    });
    /*$('#search').focus(function () {
     if (!$('.search_block').hasClass('active')) {
     $('.search_block').addClass('active');
     $('.menu_2').addClass('inactive');
     }
     });*/
    $('.search_block_close').click(function () {
        //$('.search_block').removeClass('active');
        //$('.menu_2').removeClass('inactive');
        $('.header_main .logo,.header_main .anonymous_login,.header_main .user_login,.header_main .menu,.header_main .menu_btn').removeClass('inactive');
        $('#header-search').removeClass('active');
        $('.header_main .search_block').removeClass('active');
    });

    $('.top_tab_links a').click(function () {
        var link = $(this);
        if (!link.hasClass('active')) {
            link.addClass('active').siblings().removeClass('active');
            link.parents('.top_tabs').find('.top_tab_block').removeClass('active');
            link.parents('.top_tabs').find(link.attr('href')).addClass('active');
        }

        return false;
    });
    $('.comments_tab_links a').click(function () {
        var link = $(this);
        if (!link.hasClass('active')) {
            link.addClass('active').siblings().removeClass('active');
            link.parents('.comments_tabs').find('.comments_tab_block').removeClass('active');
            link.parents('.comments_tabs').find(link.attr('href')).addClass('active');
        }

        return false;
    });

    $('.messages_tabs_links a').click(function () {
        var link = $(this);
        if (!link.hasClass('active')) {
            link.addClass('active').siblings().removeClass('active');
            link.parents('.messages').find('.messages_tabs_block').removeClass('active');
            link.parents('.messages').find(link.attr('href')).addClass('active');
        }

        return false;
    });

    title_height('.post_list_short', '.post_list_item'); //smart height titile block
    $(window).resize(function () {
        /*
         reinitialize scroll right block
         */
        col_children_heght = 0;
        col = $('.nav_col');
        elm_scroll.appendTo(col);
        if (col.length) {
            col_children_heght = col.offset().top;
            col.children().filter(function () {
                return !($(this).is('#id_scroll_elms'))
            }).each(function () {
                col_children_heght += $(this).outerHeight(true);
            });
        }
        onScroll();
        /*
         reinitialize scroll right block
         */
        if (window.innerWidth >= 1024) {
            $('body').removeClass('show_menu').removeClass('show_user_menu'); //remove body class on resize window
        }
        title_height('.post_list_short', '.post_list_item');//reinitialize smart height titile block
    });


    /*main menu*/
    if (!$('body').hasClass('show_menu')) {
        $('.header_main .menu>ul>li>a').mouseenter(function () {
            if (window.innerWidth >= 1024) {
                $('.header_main .menu>ul, .header_main .menu>ul>li').removeClass('active');
                $(this).parents('ul, li').addClass('active');
            }
        });
        $('.header_main .menu>ul>li').mouseleave(function () {
            if (window.innerWidth >= 1024) {
                $('.header_main .menu>ul, .header_main .menu>ul>li').removeClass('active');
            }
        });
    }


    $('#search2').focus(function () {
        if (!$('.search_block_2').hasClass('active')) {
            $('.search_block_2').addClass('active');
            $('.menu').addClass('inactive');
        }
    });
    $('.search_block_2_close').click(function () {
        $('.search_block_2').removeClass('active');
        $('.menu').removeClass('inactive');
        $('#search2').val('');
        return false;
    });
    $('.user_login_avatar').click(function () {
        if (window.innerWidth < 1024) {
            $('body').addClass('show_user_menu');
            return false;
        }
    });
    $('.menu_btn').click(function () {
        $('body').addClass('show_menu');
        return false;
    });
    $('.header_main .menu>ul>li>a').on('click', function () {

        $(this).parent().addClass('active');
        if ($(this).parents('li').find('.menu_sub').length > 0 && window.innerWidth < 1024) {
            return false;
        }
    });
    $('.menu_back').click(function () {
        $('.header_main .menu>ul>li').removeClass('active');
        return false;
    });

    $('.overlay,.user_menu_close').click(function () {
        $('body').removeClass('show_menu').removeClass('show_user_menu');
        $('.header_main .menu>ul>li').removeClass('active');
    });
    /*main menu*/
    /*menu*/

    $('#search').focus(function () {
        if (!$('.search_block').hasClass('active')) {
            $('.search_block').addClass('active');
            $('.menu_2').addClass('inactive');
        }
    });
    $('.search_block_close').click(function () {
        $('.search_block').removeClass('active');
        $('.menu_2').removeClass('inactive');
    });
    /*menu*/
    /*popup tabs*/

    $('.authorization_tabs_head a').on('click', function () {
        var link = $(this).attr('href');
        $('.authorization_tabs_head a, .authorization_tabs_head li, .authorization_tabs_cont').removeClass('active');
        $('.authorization_tabs_head a[href="' + link + '"], .authorization_tabs_cont' + link).addClass('active');
        $('.authorization_tabs_head a[href="' + link + '"]').parent().addClass('active');
        return false;

    });

    /*popup tabs*/

    /*editorial_slider*/

    $('.editorial_slider_list').bxSlider({
        adaptiveHeight: true,
        pager: false,
        //controls: false,
        nextSelector: '#slider_next',
        prevSelector: '#slider_prev',
        nextText: '',
        prevText: '',
        slideMargin: 10
    });

    /*editorial_slider*/


    /*slider_icons*/

    /*$('.slider_icons ul').each(function () {
        $(this).bxSlider({
            controls: false
        });
    });*/

    $('.bx-viewport').css('height', '220px');
    $('.bx-viewport ul').css('transform' , 'translate3d(-370px, 0px, 0px)');
    $('.bx-viewport ul li').css('width', '300px');

    /*slider_icons*/


    if ($('.company_goods_menu')) {
        $('.company_goods_menu li').each(function (e) {
            $(this).attr('data-tab_id', e);
            if ($(this).parents('.company_goods').find('.company_goods_tab .company_goods_tab_el:eq(' + e + ')').length) {
                $(this).parents('.company_goods').find('.company_goods_tab .company_goods_tab_el:eq(' + e + ')').attr('data-tab_id', e)
            }
        });

        $('.company_goods_menu li').click(function () {
            $(this).parents('ul').find('li').removeClass('active');
            $(this).parents('.company_goods').find('.company_goods_tab .company_goods_tab_el').removeClass('active');
            $(this).addClass('active');
            $(this).parents('.company_goods').find('.company_goods_tab_el[data-tab_id="' + $(this).attr('data-tab_id') + '"]').addClass('active');
        });
    }

    if ($('.wrap.tabs_menu .header_fixed_wr .menu_2').length) {
        $('.wrap.tabs_menu .header_fixed_wr .menu_2 li>a').click(function () {
            $(this).parents('ul').find('li').removeClass('active');
            $(this).parents('li').addClass('active');
            if ($('.frame[tag="' + $(this).attr('rel') + '"]').length) {
                $('.frame[tag]').removeClass('active');
                $('.frame[tag="' + $(this).attr('rel') + '"]').addClass('active');
                var scrollTopes = $('.frame[tag="' + $(this).attr('rel') + '"]').offset().top;
                if (scrollTopes >= ($('.head').offset().top + $('.head').outerHeight(true))) {
                    scrollTopes -= $('.header_fixed').outerHeight();
                }
                $('html,body').animate({
                    scrollTop: scrollTopes
                }, {
                    duration: '500',
                    'easing': 'linear'
                });
            }
            return false;
        });


        $(".steps_headline_list li").each(function () {
            $(this).attr('data-position', $(this).position().left);
        });
        $(window).resize(function () {
            $(".steps_headline_list li").each(function () {
                $(this).attr('data-position', $(this).position().left);
            });
        });

        $('.wrap.tabs_menu .header_fixed_wr .steps_headline_list li>a').click(function () {
            $(this).parents('.steps_headline_list').animate({scrollLeft: $(this).parents('li').attr('data-position')}, 500);
            return false;
        });

        $('.wrap.tabs_menu .header_fixed_wr .steps_headline_list').animate({scrollLeft: $('.wrap.tabs_menu .header_fixed_wr .steps_headline_list li.active').attr('data-position')}, 10);


    }


// social toggle script start

    $('.social-fixed-block').append('<li class="social-btn"></li>');
    $('.social-btn').on('click', function () {
        $(this).toggleClass('active').parent('.social-fixed-block').toggleClass('show');
    });


    setInterval(function () {
        $('.test-hover').on('mouseenter', function () {
            $('.test-x').fadeIn();
        });
        $('.tooltip_write').on('mouseleave', function () {
            $('.test-x').fadeOut();
        });
    }, 100);


    if ($(window).width() > 1280) {
        $(".fix-social").stick_in_parent();

    }

// social toggle script end

});
window.onload = function () {
    /*
     scroll right block initialize
     */
    col = $('.nav_col');
    $('.scroll_elm').each(function () {
        $(this).clone().removeClass('scroll_elm').appendTo(elm_scroll);
    });
    elm_scroll.appendTo(col);
    if (col.length) {
        col_children_heght = col.offset().top;
        col.children().filter(function () {
            return !($(this).is('#id_scroll_elms'))
        }).each(function () {
            col_children_heght += $(this).outerHeight(true);
        });
    }
    if ($('.header_fixed').length) {
        top_pos_fixed = $('.header_fixed').offset().top;
    }
    onScroll();
    /*
     scroll right block initialize
     */
    $(window).scroll(function () {
        onScroll(); //scroll right block reinitialize
    });

    $('.post_list_item_img').each(function () {
            var h_img = $(this).children('a').find('img').height();
            //console.log(h_img);
            var h_parent = $(this).children('a').height();
            //console.log(h_parent);
            if (h_img > h_parent) {
                $(this).append('<button class="post_list_item_full_img icon-glyph-147" type="button"></button>');
            }
        }
    );
    $('.post_list_item_full_img').click(function () {
        $(this).hide();
        $(this).parents('.post_list_item, .blog_post_body, .blog_comment_body').find('.post_list_item_img > a').css('max-height', 'none');
    });

    /*
     scroll to elm on click menu
     */
    $('.wrap:not(.tabs_menu) .menu_2 li a').click(function () {
        var _this = this;
        var href_to = $(this).attr('href').split('#')[1];
        if ($("#" + href_to).length) {
            clicked = false;//disabled remove classes on scroll
            $('.menu_2 li').removeClass('active');
            $(this).parents('li').addClass('active');
            $('html,body').animate({
                scrollTop: ($('#' + href_to).offset().top - $('.header_fixed').outerHeight())
            }, {
                duration: 1000,
                complete: function () {
                    clicked = true;
                    $('.menu_2').scrollLeft($('.header_fixed .menu_2 a[href="' + $(_this).attr('href') + '"]').parents('li').position().left);
                }
            });
        }
        else {
            window.location.href = $(this).attr('href');
        }
        return false;
    });
    /*
     scroll to elm on click menu
     */
};

/*
 function for calculate position for right scroll block
 */
function onScroll() {
    /*
     right scroll block
     */
    var scroll_data = $(window).scrollTop() + $('.header_fixed').outerHeight();
    if (col.length) {
        col_children_heght = col.offset().top;
        col.children().filter(function () {
            return !($(this).is('#id_scroll_elms'))
        }).each(function () {
            col_children_heght += $(this).outerHeight(true);
        });
        if (scroll_data >= col_children_heght && window.innerWidth >= 1024) {
            //if (col.outerHeight(true) + col.offset().top > scroll_data) {
            if (scroll_data <= (col.offset().top + col.outerHeight(true) - elm_scroll.outerHeight())) {
                elm_scroll.css({
                    position: 'fixed',
                    top: $('.header_fixed').outerHeight() + 'px',
                    left: col.offset().left + 'px',
                    width: col.outerWidth(true) + 'px',
                    bottom: 'auto'
                }).show();
            }
            else {
                elm_scroll.css({
                    position: 'absolute',
                    bottom: 0,
                    top: 'auto',
                    //top:(col.outerHeight(true)-elm_scroll_height)+'px',
                    left: '0px'
                }).show();
            }
            //}
        }
        else {
            if (elm_scroll.is(':visible')) {
                elm_scroll.attr('style', '').hide();
            }
        }
    }
    /*
     right scroll block
     */

    /*
     fixed header menu on scroll
     */
    if ($('.header_fixed').length) {
        if ($(window).scrollTop() >= top_pos_fixed && $(window).scrollTop() > 0) {
            $('.header_fixed').css({
                position: 'fixed',
                top: 0
            });
        }
        else {
            $('.header_fixed').attr('style', '');
        }
    }
    /*
     fixed header menu on scroll
     */

    /*
     header menu scroll
     */
    if (!$('.wrap').hasClass('tabs_menu')) {
        var window_height = ($(window).height() - $('.header_fixed').outerHeight()) * 35 / 100;
        var _this = this;
        var main_top = $(_this).scrollTop();
        var index_main = 0;
        if ($('.frame').length && (main_top >= ($('.frame:eq(0)').offset().top - window_height) && ($('.frame:eq(' + ($('.frame').length - 1) + ')').offset().top + $('.frame:eq(' + ($('.frame').length - 1) + ')').outerHeight(true)) > main_top) || !clicked) {
            $('.frame').each(function (index) {
                var _top = $(this).offset().top - main_top - $('.header_fixed').outerHeight();

                var href_to = $(this).attr('id');
                if (_top < window_height && href_to != $('.frame.active').attr('id') && main_top < ($(this).offset().top + $(this).outerHeight(true) - window_height)) {
                    //console.log(index);
                    $('.frame.active').removeClass('active');
                    if (href_to != '') {
                        $('.frame:eq(' + index + ')').addClass('active');
                        if (clicked) {
                            $('.header_fixed .menu_2 li').removeClass('active');
                            $('.header_fixed .menu_2 a[href="/#' + href_to + '"]').parents('li').addClass('active');
                            $('.menu_2').scrollLeft(menu_fix_elm[href_to]);
                        }
                        index_main = index + 1;
                    }
                }
            });
        }
        else {
            $('.frame.active,.header_fixed .menu_2 li.active').removeClass('active');
        }
    }
    /*
     header menu scroll
     */
}

/*
 function for calculate position for right scroll block
 */

/*
 function for calculate height title block
 */
function title_height(_this, children_class) {
    var TimerCheckout = setInterval(function () {
        var data_css = parseInt($('.post_list_short .post_list_item_title').css('border-right-width'));
        if (data_css != 0) {
            $(_this).find(children_class + ' h2').attr('style', '');
            $(_this).each(function (t) {
                var __this = this;
                var line_count = Math.round($(_this).outerWidth(true) / $(_this).find(children_class + ':eq(0)').outerWidth(true));
                var lengtht = 0;
                var max_height = [];
                $(this).find(children_class).each(function (e) {
                    max_height[lengtht] = $(this).find('h2').height();
                    lengtht++;
                    if ((lengtht) == line_count) {
                        for (var i = 0; i < line_count; i++) {
                            $(__this).find(children_class + ':eq(' + (e - i) + ')').find('h2').css('height', Math.max.apply(null, max_height));
                        }
                    }
                    if ((e + 1) % line_count == 0) {
                        lengtht = 0;
                    }
                });
            });
            clearInterval(TimerCheckout);
        }

    }, 100);
}

/*
 function detec all children
 */
function isChildOf(child, parent) {
    var parents = $(child).parents().get();
    for (var j = 0; j < parents.length; j++) {
        if ($(parents[j]).is(parent))
            return true;
    }

    return false;
}

/*
 function for close all popups
 */

function close_all_popups(all) {
    if (!all) {
        $('body').removeClass('show_popup');
    }
    if ($('a[data-id="authorization_pop"].active').length) {
        var active_reg = $('a[data-id="authorization_pop"].active');
        var login_tab = $('a[data-id="login_pop"]');
        active_reg.parent().removeClass('active');
        $(active_reg.attr('href')).removeClass('active');
        active_reg.removeClass('active');
        login_tab.parent().addClass('active');
        $(login_tab.attr('href')).addClass('active');
        login_tab.addClass('active');
    }
    $('.popup').hide();
}


// input tupe file

'use strict';

;( function (document, window, index) {
    var inputs = document.querySelectorAll('.inputfile');
    Array.prototype.forEach.call(inputs, function (input) {
        var label = input.nextElementSibling,
            labelVal = label.innerHTML;

        input.addEventListener('change', function (e) {
            var fileName = '';
            if (this.files && this.files.length > 1)
                fileName = ( this.getAttribute('data-multiple-caption') || '' ).replace('{count}', this.files.length);
            else
                fileName = e.target.value.split('\\').pop();

            if (fileName)
                label.querySelector('span').innerHTML = fileName;
            else
                label.innerHTML = labelVal;
        });

        // Firefox bug fix
        input.addEventListener('focus', function () {
            input.classList.add('has-focus');
        });
        input.addEventListener('blur', function () {
            input.classList.remove('has-focus');
        });
    });
}(document, window, 0));
// input tupe file